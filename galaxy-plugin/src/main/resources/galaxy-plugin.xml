<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:reg="http://www.dangdang.com/schema/ddframe/reg"
       xmlns:job="http://www.dangdang.com/schema/ddframe/job"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context.xsd
                        http://www.dangdang.com/schema/ddframe/reg
                        http://www.dangdang.com/schema/ddframe/reg/reg.xsd
                        http://www.dangdang.com/schema/ddframe/job
                        http://www.dangdang.com/schema/ddframe/job/job.xsd
                        ">

    <bean id="galaxy.plugin.propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="order" value="2" />
        <property name="locations">
            <list>
                <value>classpath:galaxy-plugin.properties</value>
            </list>
        </property>
    </bean>

    <bean id="regCenter" class="com.dangdang.ddframe.reg.zookeeper.ZookeeperRegistryCenter" init-method="init">
        <constructor-arg>
            <bean class="com.dangdang.ddframe.reg.zookeeper.ZookeeperConfiguration">
                <property name="serverLists" value="${zk.serverLists}" />
                <property name="namespace" value="${zk.namespace}" />
                <property name="baseSleepTimeMilliseconds" value="${zk.baseSleepTimeMilliseconds}" />
                <property name="maxSleepTimeMilliseconds" value="${zk.maxSleepTimeMilliseconds}" />
                <property name="maxRetries" value="${zk.maxRetries}" />
            </bean>
        </constructor-arg>
    </bean>

    <bean id="transactionRecoveryJob" class="com.dangdang.ddframe.job.spring.schedule.SpringJobScheduler" init-method="init">
        <constructor-arg ref="regCenter" />
        <constructor-arg>
            <bean class="com.dangdang.ddframe.job.api.JobConfiguration">
                <constructor-arg name="jobName" value="transactionRecoveryJob" />
                <constructor-arg name="jobClass" value="io.anyway.galaxy.scheduler.TransactionRecoveryJob" />
                <constructor-arg name="shardingTotalCount" value="${transactionRecoveryJob.shardingTotalCount}" />
                <constructor-arg name="cron" value="${transactionRecoveryJob.cron}" />
                <property name="description" value="${transactionRecoveryJob.description}" />
            </bean>
        </constructor-arg>
    </bean>

    <!--<job:bean id="transactionRecoveryJob" class="io.anyway.galaxy.scheduler.TransactionRecoveryJob"
              regCenter="regCenter"
              shardingTotalCount="${transactionRecoveryJob.shardingTotalCount}"
              cron="${transactionRecoveryJob.cron}"
              description="${transactionRecoveryJob.description}" />-->

</beans>