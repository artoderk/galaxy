<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.anyway.galaxy.console.dal.dao.DataSourceInfoDao" >

  <resultMap type="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto" id="dataSourceInfoDto">
    <id column="id" property="id" />
    <result column="name" property="name" />
    <result column="driver_class" property="driverClass" />
    <result column="jndi" property="jndi" />
    <result column="url" property="url" />
    <result column="username" property="username" />
    <result column="password" property="password" />
    <result column="active_flag" property="activeFlag" />
    <result column="memo" property="memo" />
    <result column="gmt_create" property="gmtCreate" />
    <result column="gmt_modified" property="gmtModified" />
  </resultMap>


  <insert id="add" parameterType="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto" >
    insert into datasource_info (name, driver_class, jndi, url, username, password, memo, gmt_create)
    values (#{name}, #{driverClass}, #{url}, #{username}, #{password}, #{memo}, current_timestamp(0)::timestamp without time zone)
  </insert>

  <select id="list" parameterType="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto" resultType="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto">
    select id, name, driver_class, jndi, url, username, password, active_flag, memo, gmt_create, gmt_modified
    from datasource_info
  </select>

  <select id="get" parameterType="long" resultType="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto">
    select id, name, driver_class, jndi, url, username, password, active_flag, memo, gmt_create, gmt_modified
    from datasource_info di
    where id = #{id}
  </select>

  <delete id="del" parameterType="io.anyway.galaxy.console.dal.dto.DataSourceInfoDto" >
    update datasource_info
    set active_flag = 0
    where id = #{id}
  </delete>

</mapper>